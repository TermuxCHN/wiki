# 换源
**不要在任何虚拟机中尝试使用termux，不是源的问题**
**即使指定架构，也是不行滴**
## ~~如果你是个萌新~~
---
运行:
```bash
termux-change-repo
```
选一个你喜欢的<br />
使用上，下，左，右键与窗口交互，空格选择，回车确定
* ~~什么，你说慢？你不会选个中国的啊~~<br />
* ~~什么？还慢？你在中国还嫌慢?那就用官方源~~<br />
* ~~啥？你在中国？你就把代理关了啊~~<br />
## 如果有问题，那就得手动换源了
---
### **请做好备份，什么？怎么备份？建议STFW**
-----
备份源文件:
```bash
cp $PREFIX/etc/apt/sources.list $PREFIX/etc/apt/sources.list.bak
```
-----
~~强烈推荐USTC~~<br />
**注意，不要使用任何外部app修改文件，首先你能不能修改是一回事，其次，就算你有root，也不要作死用外部app修改**
### 清华镜像
-----
#### 命令行<sub>~~[嗯，直接偷](https://mirrors.tuna.tsinghua.edu.cn/help/termux/)~~</sub>
```bash
sed -i 's@^\(deb.*stable main\)$@#\1\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/apt/termux-main stable main@' $PREFIX/etc/apt/sources.list
apt update && apt upgrade
```
-----
#### 手动
* 替换`$PREFIX/etc/apt/sources.list`为如下内容
```
# The termux repository mirror from TUNA:
deb https://mirrors.tuna.tsinghua.edu.cn/termux/apt/termux-main stable main
```
## 停一下，你看懂了吗？~~没看懂？好吧没救了~~，看懂了？好，我们继续
### 其实所有的换源方法都差不多，无非是要修改`$PREFIX/etc/apt/sources.list`
-----
#### [DreamOneX](https://github.com/dreamonex)的自动脚本
```bash
export SOURCE=这里填你要换的源地址，别瞎xx复制粘贴，不要加 stable main
sed -i 's@^\(deb.*stable main\)$@#\1\ndeb '$SOURCE' stable main@' $PREFIX/etc/apt/sources.list
unset SOURCE
apt update && apt upgrade
```
-----
#### 手动
* 替换`$PREFIX/etc/apt/sources.list`
```
deb 反复强调，你的源的地址，不要加stablemain，因为右边就是，看就在这-> stable main
```
## 源
参考:
* https://github.com/termux/termux-packages/issues?q=is%3Aopen+label%3Adocumentation+%5Bnew+mirror%5D
* https://github.com/termux/termux-packages/wiki/Mirrors#mirrors-hosted-in-china
* https://github.com/termux/termux-packages/discussions?discussions_q=mirror+label%3Adocumentation+mirror

## 可能出现的错误
* 提示`CANNOT LINK EXECUTABLE "curl": library "libssl.so.3" not found<br />
  可以试试的办法:<br />
1. 尝试使用`termux-change-repo`<br />
2. 运行这个
```bash
sed -i 's|https|http|g' $PREFIX/etc/apt/sources.list
apt update && apt upgrade
```

3. 将`$PREFIX/etc/apt/sources.list`中的源地址更改为http地址<br />
e.g. `deb https://mirrors.tuna.tsinghua.edu.cn/termux/apt/termux-main stable main`改为`deb http://mirrors.tuna.tsinghua.edu.cn/termux/apt/termux-main stable main`
4. 如果想使用https源~~(为什么要用https源呢，加解密还要花时间花性能而且没什么好加密的)~~
1. 首先，换为http源
2. 然后，`pkg i openssl`
3. 最后，换回https源
当然，你也可以随便找一个源([比如](https://mirrors.tuna.tsinghua.edu.cn/termux/termux-packages-24/pool/main/o/openssl/))，下载**对应架构**的**openssl**软件包(如果你不知道你的架构，可以使用`uname -m`查看)，注意不是**openssl-1.1**，注意是**termux源**，运行:
```bash
termux-setup-storage # 可能会询问存储空间/SD卡/内部存储权限，同意，~~啥这提到的权限都没有？无论他问你要什么权限，同意就行~~
cp storage/downloads/openssl*.deb .
dpkg -i ./openssl*.deb
apt update && apt upgrade
```
注: uname对应架构
* `arm64`, `aarch64`均下载`aarch64`软件包
* `armv8l`, `armv7`, `arm`, ~~`aarch32`~~<sub> ~~(我没见过)~~ </sub>均下载`arm`软件包
* `amd64`, `x86_64`, `x64`均下载`x86_64`软件包
* `i686`下载`i686`软件包
